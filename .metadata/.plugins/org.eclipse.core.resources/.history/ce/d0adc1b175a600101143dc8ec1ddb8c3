<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>보낸 메시지함</title>

<!-- ✅ Bootstrap 5.3.0 -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet">

<style>
  .fade-section {
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
    display: none;
  }
  .fade-section.show {
    display: block;
    opacity: 1;
  }

.commonSms tbody tr:hover {
  background-color: #f6f6f6;
  cursor: pointer;
}

  #pager .page-item.active .page-link {
    background:#212529;
    color:#fff;
    border-color:#212529;
    border-radius:.6rem;
  }
  #pager .page-item.disabled .page-link {
    color:#bbb;
    pointer-events:none;
    background:transparent;
    border-color:transparent;
  }
  #pager .page-link {
    border:none;
    background:transparent;
    color:#4a4a4a;
  }
</style>
</head>
<body class="bg-body-tertiary">
<div class="container-fluid">
  <div class="row">

    <!-- 여기서 사이드바를 주입 -->
    <div id="sidebar-slot" class="col-2 p-0"></div>

    <!-- ✅ 메인 콘텐츠 -->
    <main class="col-10 p-4">

<div class="container py-4">
  <h2 class="text-center mb-4">보낸 메시지함</h2>

  <!-- ✅ 상단 탭 -->
  <ul class="nav nav-tabs justify-content-center mb-3" id="messageTabs">
    <li class="nav-item">
      <button id="reserveBtn" class="nav-link active">예약 메시지</button>
    </li>
    <li class="nav-item">
      <button id="commonBtn" class="nav-link">일반 메시지</button>
    </li>
  </ul>

  <!-- ✅ 예약 메시지 구역 -->
 <div class="reserveSms fade-section show text-center">
  <div class="table-responsive">
    <table class="table table-bordered align-middle text-center">
      <thead class="table-light">
        <tr>
          <th>수신인</th>
          <th>발신인</th>
          <th>전화번호</th>
          <th>일시</th>
          <th>템플릿명</th>
        </tr>
      </thead>
      <tbody>
        <tr class="readonly-row">
          <td>김상철</td>
          <td>김관리</td>
          <td>010-1211-6337</td>
          <td>2025-09-20 13:00</td>
          <td>예약(내원 전일)</td>
        </tr>
        <tr class="readonly-row">
          <td>김병만</td>
          <td>김관리</td>
          <td>010-4567-8901</td>
          <td>2025-09-19 09:00</td>
          <td>예약(내원 전일)</td>
        </tr>
        <tr class="readonly-row">
          <td>김아리</td>
          <td>김관리</td>
          <td>010-5678-9012</td>
          <td>2025-09-19 17:00</td>
          <td>예약(내원 전일)</td>
        </tr>
        <tr class="readonly-row">
          <td>최상현</td>
          <td>김관리</td>
          <td>010-6789-0123</td>
          <td>2025-09-19 13:00</td>
          <td>예약(내원 전일)</td>
        </tr>
        <tr class="readonly-row">
          <td>오인표</td>
          <td>관리김</td>
          <td>010-7890-1234</td>
          <td>2025-09-19 11:00</td>
          <td>예약 확정 안내</td>
        </tr>
        <tr class="readonly-row">
          <td>밥말리</td>
          <td>관리김</td>
          <td>010-8901-2345</td>
          <td>2025-09-18 14:00</td>
          <td>예약 확정 안내</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


  <!-- ✅ 일반 메시지 구역 (Table 형태) -->
  <div class="commonSms fade-section">

    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>수신인</th>
            <th>발신인</th>
            <th>전화번호</th>
            <th>일시</th>
            <th>내용</th>
          </tr>
        </thead>
        <tbody>
          <tr class="message-row">
            <td>김상철</td>
            <td>김관리</td>
            <td>010-1211-6337</td>
            <td>2025-09-20 13:00</td>
            <td>안녕하세요 김상철님 ...</td>
          </tr>
          <tr class="message-row">
            <td>김병만</td>
            <td>김관리</td>
            <td>010-4567-8901</td>
            <td>2025-09-19 09:00</td>
            <td>안녕하세요 김병만님 ...</td>
          </tr>
          <tr class="message-row">
            <td>김아리</td>
            <td>김관리</td>
            <td>010-5678-9012</td>
            <td>2025-09-19 17:00</td>
            <td>안녕하세요 김아리님 ...</td>
          </tr>
          <tr class="message-row">
            <td>최상현</td>
            <td>김관리</td>
            <td>010-6789-0123</td>
            <td>2025-09-19 13:00</td>
            <td>안녕하세요 최상현님 ...</td>
          </tr>
          <tr class="message-row">
            <td>오인표</td>
            <td>관리김</td>
            <td>010-7890-1234</td>
            <td>2025-09-19 11:00</td>
            <td>안녕하세요 오인표님 ...</td>
          </tr>
          <tr class="message-row">
            <td>밥말리</td>
            <td>관리김</td>
            <td>010-8901-2345</td>
            <td>2025-09-18 14:00</td>
            <td>안녕하세요 밥말리님 ...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ✅ 메시지 상세 모달 -->
<div class="modal fade" id="messageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content border border-primary rounded-3">

      <!-- 헤더 -->
      <div class="modal-header">
        <h5 class="modal-title fw-bold w-100 text-center">보낸 메시지 상세보기</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
      </div>

      <!-- 바디 -->
      <div class="modal-body">
        <div class="row mb-2">
          <div class="col-2 text-end fw-bold">수신인</div>
          <div class="col-4" id="modalReceiver">-</div>
          <div class="col-2 text-end fw-bold">발신인</div>
          <div class="col-4" id="modalSender">-</div>
        </div>

        <div class="row mb-2">
          <div class="col-2 text-end fw-bold">전화번호</div>
          <div class="col-4" id="modalPhone">-</div>
          <div class="col-2 text-end fw-bold">일시</div>
          <div class="col-4" id="modalDate">-</div>
        </div>

        <div class="row mt-3">
          <div class="col-2 text-end fw-bold">보낸내용</div>
          <div class="col-10">
            <div class="bg-light p-2 rounded" id="modalContent">
              (내용 없음)
            </div>
          </div>
        </div>
      </div>

      <!-- 푸터 -->
      <div class="modal-footer justify-content-center border-0 pb-3 pt-0">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
      </div>

    </div>
  </div>
</div>

<!-- ✅ 페이지 이동 버튼 -->
<nav aria-label="페이지 이동" class="d-flex justify-content-center my-3">
  <ul id="pager" class="pagination pagination-sm align-items-center gap-2">
    <!-- 처음 / 이전 -->
    <li class="page-item"><button class="page-link" data-action="first" aria-label="처음">«</button></li>
    <li class="page-item"><button class="page-link" data-action="prev" aria-label="이전">‹</button></li>

    <!-- 숫자들 -->
    <li class="page-item"><button class="page-link" data-page="1">1</button></li>
    <li class="page-item"><button class="page-link" data-page="2">2</button></li>
    <li class="page-item"><button class="page-link" data-page="3">3</button></li>
    <li class="page-item"><button class="page-link" data-page="4">4</button></li>
    <li class="page-item"><button class="page-link" data-page="5">5</button></li>
    <li class="page-item"><button class="page-link" data-page="6">6</button></li>

    <!-- 다음 / 마지막 -->
    <li class="page-item"><button class="page-link" data-action="next" aria-label="다음">›</button></li>
    <li class="page-item"><button class="page-link" data-action="last" aria-label="마지막">»</button></li>
  </ul>
</nav>

    </main>
  </div>
</div>
<!-- ✅ Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- ✅ 탭 전환 및 모달 이벤트 -->
<script>
  const reserveBtn = document.getElementById('reserveBtn');
  const commonBtn  = document.getElementById('commonBtn');
  const reserveSec = document.querySelector('.reserveSms');
  const commonSec  = document.querySelector('.commonSms');

  // 탭 전환
  function showSection(showEl, hideEl, activeBtn, inactiveBtn) {
    hideEl.classList.remove('show');
    activeBtn.classList.add('active');
    inactiveBtn.classList.remove('active');
    setTimeout(() => {
      hideEl.style.display = 'none';
      showEl.style.display = 'block';
      setTimeout(() => showEl.classList.add('show'), 10);
    }, 200);
  }

  reserveBtn.addEventListener('click', () => {
    showSection(reserveSec, commonSec, reserveBtn, commonBtn);
  });
  commonBtn.addEventListener('click', () => {
    showSection(commonSec, reserveSec, commonBtn, reserveBtn);
  });

  // ✅ 테이블 행 클릭 시 모달 열기
  document.querySelectorAll('.message-row').forEach(row => {
    row.addEventListener('click', () => {
      const cells = row.querySelectorAll('td');
      document.getElementById('modalReceiver').textContent = cells[0].textContent;
      document.getElementById('modalSender').textContent = cells[1].textContent;
      document.getElementById('modalPhone').textContent   = cells[2].textContent;
      document.getElementById('modalDate').textContent    = cells[3].textContent;
      document.getElementById('modalContent').textContent = cells[4].textContent;

      const modal = new bootstrap.Modal(document.getElementById('messageModal'));
      modal.show();
    });
  });
  
  // ✅ 페이지 이동 js
  (() => {
	  const pager = document.getElementById('pager');
	  const minPage = 1;
	  const maxPage = 6;
	  let current = 1; // ✅ 1페이지부터 시작

	  updateUI();

	  pager.addEventListener('click', (e) => {
	    const btn = e.target.closest('.page-link');
	    if (!btn) return;

	    const page = btn.getAttribute('data-page');
	    if (page) {
	      current = Number(page);
	      updateUI();
	      return;
	    }

	    const action = btn.getAttribute('data-action');
	    if (!action) return;

	    if (action === 'first') current = minPage;
	    if (action === 'prev')  current = Math.max(minPage, current - 1);
	    if (action === 'next')  current = Math.min(maxPage, current + 1);
	    if (action === 'last')  current = maxPage;

	    updateUI();
	  });

	  function updateUI() {
	    pager.querySelectorAll('.page-item').forEach(li => li.classList.remove('active'));
	    pager.querySelectorAll('[data-page]').forEach(btn => {
	      if (Number(btn.getAttribute('data-page')) === current) {
	        btn.parentElement.classList.add('active');
	      }
	    });
	    setDisabled('[data-action="first"],[data-action="prev"]', current === minPage);
	    setDisabled('[data-action="next"],[data-action="last"]', current === maxPage);
	  }

	  function setDisabled(selector, isDisabled) {
	    pager.querySelectorAll(selector).forEach(btn => {
	      btn.parentElement.classList.toggle('disabled', isDisabled);
	      btn.setAttribute('tabindex', isDisabled ? '-1' : '0');
	      btn.setAttribute('aria-disabled', isDisabled ? 'true' : 'false');
	    });
	  }
	})();
</script>

</body>
</html>
