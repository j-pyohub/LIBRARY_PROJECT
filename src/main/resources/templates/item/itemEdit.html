<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>재고 품목 수정</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body { background-color: #f5f5f5 !important; }
        .wrapper-box {
            background: #fff;
            padding: 40px;
            border-radius: 10px;
            border: 1px solid #ddd;
            max-width: 1500px;
            margin: 40px auto;
        }
        .section-inner {
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .custom-btn {
            background-color: #FFEEAA !important;
            border-color: #FFEEAA !important;
            color: #000;
        }
        .custom-btn:hover {
            background-color: #f2da84 !important;
            border-color: #f2da84 !important;
        }
        .gray-btn {
            background-color: #D9D9D9 !important;
            border: #ffffff !important;
        }
        .gray-btn:hover {
            background-color: #C9C9C9 !important;
            border-color: #ffffff !important;
        }
        .img-drop {
            border: 2px dashed #ccc;
            border-radius: 8px;
            width: 220px;
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #aaa;
            cursor: pointer;
            background: #fafafa;
        }
    </style>
</head>
<body>

<header th:replace="fragments/toolBarManager :: toolBarManager"></header>

<main class="py-4">
    <div class="wrapper-box">

        <!-- 제목 -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold">재고 품목 수정</h2>
            <button class="btn btn-outline-secondary"
                    th:onclick="|location.href='@{/manager/item/list}'|">
                전체 품목 목록으로
            </button>
        </div>

        <!-- 기본 정보 -->
        <div class="section-inner">
            <h5 class="fw-bold mb-4">기본 정보</h5>
            <div class="row g-4">
                <div class="col-md-3">
                    <label class="form-label fw-semibold">카테고리</label>
                    <select class="form-select">
                        <option>도우</option>
                        <option>소스</option>
                        <option selected>치즈</option>
                        <option>토핑</option>
                        <option>야채</option>
                        <option>사이드</option>
                        <option>기타</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">품목 코드</label>
                    <input type="text" class="form-control" value="MOZZ-2.5KG">
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">품목 명</label>
                    <input type="text" class="form-control" value="모짜렐라 2.5kg 블럭">
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">재료 명</label>
                    <input type="text" class="form-control" value="피자 치즈">
                </div>
            </div>
        </div>

        <!-- 규격·공급 정보 -->
        <div class="section-inner">
            <h5 class="fw-bold mb-4">규격·공급 정보</h5>
            <div class="row g-4">
                <div class="col-md-3">
                    <label class="form-label fw-semibold">기준 단위</label>
                    <select class="form-select">
                        <option selected>g</option>
                        <option>kg</option>
                        <option>ea</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">공급 단위</label>
                    <select class="form-select">
                        <option>box</option>
                        <option selected>ea</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">환산 (1 공급단위)</label>
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control" value="2500">
                        <span class="input-group-text">기준단위</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-semibold">공급 가격</label>
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control" value="45000">
                        <span class="input-group-text">원</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <label class="form-label fw-semibold">공급사</label>
                    <input type="text" class="form-control" value="신선신선 치즈">
                </div>
            </div>
        </div>

        <!-- 보관 정보 -->
        <div class="section-inner">
            <h5 class="fw-bold mb-4">보관 정보</h5>
            <div class="row g-4">
                <div class="col-md-4">
                    <label class="form-label fw-semibold d-block">보관 방식</label>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="storageType" id="storageRoom">
                        <label class="btn btn-outline-secondary" for="storageRoom">상온</label>

                        <input type="radio" class="btn-check" name="storageType" id="storageCold" checked>
                        <label class="btn btn-outline-secondary" for="storageCold">냉장</label>

                        <input type="radio" class="btn-check" name="storageType" id="storageFrozen">
                        <label class="btn btn-outline-secondary" for="storageFrozen">냉동</label>
                    </div>
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">보관기한 타입</label>
                    <select class="form-select" id="expirationType">
                        <option value="AFTER_DAYS" selected>입고 후 n일</option>
                        <option value="AFTER_MONTHS">입고 후 n개월</option>
                        <option value="FIFO">선입 선출</option>
                        <option value="EXPIRY_LEFT">남은 유통기한 기준</option>
                    </select>
                </div>

                <!-- 입고 후 n일 선택 시 노출 -->
                <div class="col-md-4" id="expirationDaysBox">
                    <label class="form-label fw-semibold">보관기한</label>
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control" value="7">
                        <span class="input-group-text">일</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 기타 정보 -->
        <div class="section-inner">
            <h5 class="fw-bold mb-4">기타 정보</h5>
            <div class="row g-4">
                <div class="col-md-4">
                    <label class="form-label fw-semibold">품목 이미지</label><br>
                    <div class="img-drop" onclick="document.getElementById('itemImage').click();">+</div>
                    <input type="file" id="itemImage" class="form-control mt-2" style="max-width:220px;">
                </div>
                <div class="col-md-8">
                    <label class="form-label fw-semibold">비고</label>
                    <textarea class="form-control" rows="5">냉장 0~4℃ 보관. 사용 후 즉시 밀봉.</textarea>
                </div>
            </div>
        </div>

        <div class="text-center mt-3">
            <button class="btn custom-btn">저장</button>
            <button class="btn gray-btn"
                    th:onclick="|location.href='@{/manager/item/list}'|">
                취소
            </button>
        </div>

    </div>
</main>

<script>
    // 보관기한 타입에 따라 입력칸 노출
    $("#expirationType").on("change", function () {
        const val = $(this).val();
        if (val === "AFTER_DAYS") {
            $("#expirationDaysBox").show();
        } else {
            $("#expirationDaysBox").hide();
        }
    });

    // 초기 상태: 입고 후 n일 선택되어 있으므로 표시
    $(function () {
        if ($("#expirationType").val() === "AFTER_DAYS") {
            $("#expirationDaysBox").show();
        }
    });

    // 이미지 드래그·클릭
    $(".img-drop").on("dragover", function (e) {
        e.preventDefault();
        $(this).css("border-color", "#999");
    }).on("dragleave", function () {
        $(this).css("border-color", "#ccc");
    }).on("drop", function (e) {
        e.preventDefault();
        $("#itemImage")[0].files = e.originalEvent.dataTransfer.files;
        $(this).css("border-color", "#ccc");
    });
</script>

</body>
</html>
