<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ì§ì˜ì  íŒë§¤ìƒí’ˆ ì¡°íšŒ</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background-color: #e5e5e5;
    }
    .top-bar {
      background-color: #7be3a4;
      padding: 8px 16px;
    }
    .section-box {
      background: #fff;
      border-radius: 10px;
      border: 1px solid #ddd;
      padding: 20px;
    }
    .table thead th {
      background-color: #fafafa;
      font-weight: 600;
    }
    .pagination-wrapper {
      display: flex;
      justify-content: center;
      width: 100%;
    }
  </style>
</head>

<body class="p-3">

<div class="border border-secondary" style="max-width: 1200px; margin: 0 auto; background:white;">


  <!-- ìƒë‹¨ ë©”ë‰´ -->
  <div class="top-bar d-flex align-items-center">

    <div class="btn-group me-3">
      <button class="btn btn-light btn-sm">íšŒì‚¬ ë¡œê³ </button>
      <button class="btn btn-secondary btn-sm">íšŒì‚¬ ëª…</button>
    </div>

    <ul class="nav">
      <li class="nav-item"><a class="nav-link fw-bold text-dark" href="#">ë§¤ì¶œ â–¾</a></li>
      <li class="nav-item"><a class="nav-link text-dark" href="#">ì¬ê³  â–¾</a></li>
      <li class="nav-item"><a class="nav-link text-dark" href="#">ë©”ë‰´ â–¾</a></li>
      <li class="nav-item"><a class="nav-link text-dark" href="#">ì§ì˜ì </a></li>
    </ul>

    <div class="ms-auto d-flex align-items-center gap-2">
      <span th:text="${loginUserName}">ë³¸ì‚¬ í™ê¸¸ë™</span>
      <button class="btn btn-outline-primary btn-sm">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>


  <!-- ë’¤ë¡œê°€ê¸° + ë§¤ì¥ëª… + ê²€ìƒ‰ -->
  <div class="px-3 pt-3">

    <a th:href="@{/store/list}" class="btn btn-warning btn-sm mb-2">ë’¤ë¡œê°€ê¸°</a>

    <div class="text-center fs-5 fw-bold" th:text="${storeName}">
      ê¸ˆì²œì§ì˜ì 
    </div>

    <!-- ê²€ìƒ‰ -->
    <div class="d-flex justify-content-end mb-2">
      <span class="fw-semibold me-2">íŒë§¤ìƒí’ˆëª…</span>
      <form th:action="@{/store/sales}" method="get" class="input-group input-group-sm" style="width:230px;">
        <input type="text" name="keyword" class="form-control" placeholder="ê²€ìƒ‰" th:value="${keyword}">
        <button class="btn btn-outline-secondary" type="submit">ğŸ”</button>
      </form>
    </div>
  </div>


  <!-- í…Œì´ë¸” -->
  <div class="px-3 pb-3">

    <div class="section-box">

      <table class="table table-hover align-middle mb-3">
        <thead>
        <tr class="text-center">
          <th style="width:6%;">ë²ˆí˜¸</th>
          <th style="width:14%;">ì¹´í…Œê³ ë¦¬</th>
          <th style="width:25%;">íŒë§¤ìƒí’ˆ</th>
          <th style="width:10%;">ì‚¬ì´ì¦ˆ</th>
          <th style="width:10%;">íŒë§¤ìˆ˜ëŸ‰</th>
          <th style="width:15%;">ë§¤ì¶œì•¡</th>
        </tr>
        </thead>

        <tbody>
        <tr class="text-center" th:each="item, iStat : ${items}">
          <td th:text="${iStat.index + 1}"></td>
          <td th:text="${item.category}"></td>
          <td th:text="${item.name}" class="text-start"></td>
          <td th:text="${item.size}"></td>
          <td th:text="${item.count}"></td>
          <td th:text="${#numbers.formatInteger(item.sales, 0, 'COMMA')}"></td>
        </tr>
        </tbody>
      </table>


      <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
      <div class="pagination-wrapper mb-3">

        <ul class="pagination pagination-sm">

          <!-- ì´ì „ -->
          <li class="page-item" th:classappend="${page == 1 ? 'disabled' : ''}">
            <a class="page-link"
               th:href="@{/store/sales(page=${page - 1}, size=${size}, keyword=${keyword})}">
              &lt;
            </a>
          </li>

          <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
          <li class="page-item"
              th:each="p : ${#numbers.sequence(1, totalPages)}"
              th:classappend="${page == p ? 'active' : ''}">
            <a class="page-link"
               th:text="${p}"
               th:href="@{/store/sales(page=${p}, size=${size}, keyword=${keyword})}">
            </a>
          </li>

          <!-- ë‹¤ìŒ -->
          <li class="page-item" th:classappend="${page == totalPages ? 'disabled' : ''}">
            <a class="page-link"
               th:href="@{/store/sales(page=${page + 1}, size=${size}, keyword=${keyword})}">
              &gt;
            </a>
          </li>

        </ul>

      </div>


      <!-- í˜ì´ì§€ í¬ê¸° ì„ íƒ + ìˆ˜ì • ë²„íŠ¼ ìœ„ì¹˜ -->
      <div class="d-flex justify-content-end gap-2">

        <select class="form-select form-select-sm"
                style="width:80px;"
                onchange="location.href='?page=1&size=' + this.value + '&keyword=[[${keyword}]]'">
          <option value="5"  th:selected="${size == 5}">5ê°œ</option>
          <option value="10" th:selected="${size == 10}">10ê°œ</option>
          <option value="20" th:selected="${size == 20}">20ê°œ</option>
        </select>

        <!-- ìˆ˜ì • ë²„íŠ¼: ì§ì˜ì ë§Œ ë³´ì„ -->
        <a class="btn btn-primary btn-sm"
           th:if="${role == 'ROLE_STORE'}"
           th:href="@{/store/sales/edit-list(storeId=${storeId})}">
          ìˆ˜ì •
        </a>

      </div>

    </div>
  </div>

</div>

</body>
</html>
