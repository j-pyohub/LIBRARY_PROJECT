<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주문 조회 (본사)</title>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="/js/util.js"></script>

  <style>
    body { background-color:#e5e5e5; }
    .wrapper {
      max-width: 1500px;
      margin: 0 auto;
      background: #fff;
    }
    .section-box {
      background:#fff;
      border-radius:10px;
      border:1px solid #ddd;
      padding:20px;
    }
    .table thead th {
      background-color:#fbfbfb;
      font-weight:600;
    }
    .pagination-wrapper {
      display:flex;
      justify-content:center;
      width:100%;
    }
    .w-150 { width:150px; }
    .w-180 { width:180px; }
  </style>
</head>

<body class="p-3">

<div class="wrapper border border-secondary">

  <div class="p-3">
    <div class="fs-3 fw-bold mb-3">주문 조회</div>
  </div>

  <!-- 검색 영역 -->
  <div class="px-3 d-flex justify-content-end align-items-center gap-2 mb-2">

    <span class="fw-semibold">주문 일자</span>
    <input id="dateInput" type="date" class="form-control form-control-sm w-150">

    <span class="fw-semibold ms-3">직영점</span>
    <input id="storeInput" type="text" class="form-control form-control-sm w-180">

    <button id="searchBtn" class="btn btn-warning btn-sm">검색</button>
    <button id="resetBtn" class="btn btn-outline-secondary btn-sm">초기화</button>
  </div>

  <!-- 리스트 -->
  <div class="px-3 pb-3">
    <div class="section-box">

      <table class="table table-hover align-middle">
        <thead>
        <tr class="text-center">
          <th>주문 번호</th>
          <th>주문 일시</th>
          <th>직영점</th>
          <th>총 판매 메뉴</th>
          <th>총 판매 금액</th>
          <th></th>
        </tr>
        </thead>

        <tbody id="orderTableBody">

        <!-- 그대로 둠 -->
        <tr class='text-center'>
          <td>10</td>
          <td>2025-11-18 13:20:00</td>
          <td>금천구청점</td>
          <td>1개</td>
          <td>30,000원</td>
          <td><img src="/image/detail.png" class="detailBtn" data-orderno="10" width="24"></td>
        </tr>

        </tbody>
      </table>

      <!-- 페이지네이션 -->
      <nav>
        <ul class="pagination justify-content-center" id="pagination">
          <li class="page-item disabled">
            <a class="page-link" data-page="prev">이전</a>
          </li>
          <li class="page-item active">
            <a class="page-link" data-page="1">1</a>
          </li>
          <li class="page-item">
            <a class="page-link" data-page="2">2</a>
          </li>
          <li class="page-item">
            <a class="page-link" data-page="3">3</a>
          </li>
          <li class="page-item">
            <a class="page-link" data-page="next">다음</a>
          </li>
        </ul>
      </nav>

    </div>
  </div>

</div>

<!-- ============================
     상세 모달
============================ -->
<div class="modal fade" id="orderDetailModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered" style="max-width:520px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fw-bold">주문 상세보기</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <div class="mb-2">
          <span class="fw-semibold">주문 일시</span>
          <span id="detailOrderDate" class="ms-2"></span>
        </div>

        <div class="mb-3">
          <span class="fw-semibold">직영점명</span>
          <span id="detailStoreName" class="ms-2"></span>
        </div>

        <table class="table table-bordered text-center align-middle">
          <thead class="table-light">
          <tr>
            <th>메뉴</th><th>사이즈</th><th>가격</th><th>수량</th><th>총 금액</th>
          </tr>
          </thead>
          <tbody id="detailMenuList"></tbody>
        </table>

        <div class="text-end fw-bold">
          총 결제 금액 <span id="detailTotalPrice"></span>
        </div>

      </div>

      <div class="modal-footer">
        <button class="btn btn-warning" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================
     SCRIPT (jQuery)
============================ -->
<script>

  /* 샘플 상세 데이터 */
  const sampleDetailData = {};
  for (let n = 1; n <= 10; n++) {
    sampleDetailData[n] = {
      orderDate: "2025-11-18 13:25:00",
      storeName: "직영점 " + n,
      menus: [
        {name:"페퍼로니 피자", size:"라지", price:25000, qty:1},
        {name:"치즈 피자", size:"라지", price:20000, qty:2}
      ]
    };
  }

  const orderModal = new bootstrap.Modal(document.getElementById("orderDetailModal"));

  /* 상세 모달 */
  $(document).on("click", ".detailBtn", function () {
    const orderNo = $(this).data("orderno");
    const data = sampleDetailData[orderNo];

    $("#detailOrderDate").text(data.orderDate);
    $("#detailStoreName").text(data.storeName);

    let total = 0;
    $("#detailMenuList").empty();

    data.menus.forEach(m => {
      const sum = m.price * m.qty;
      total += sum;

      $("#detailMenuList").append(`
        <tr>
          <td>${m.name}</td>
          <td>${m.size}</td>
          <td>${m.price.toLocaleString()} 원</td>
          <td>${m.qty}</td>
          <td>${sum.toLocaleString()} 원</td>
        </tr>
      `);
    });

    $("#detailTotalPrice").text(total.toLocaleString() + " 원");

    orderModal.show();
  });

  /* 검색 / 초기화 */
  $("#resetBtn").on("click", function () {
    $("#dateInput").val("");
    $("#storeInput").val("");
  });

  $("#searchBtn").on("click", function () {
    alert("검색 기능은 백엔드 연동 후 작동합니다.");
  });

</script>

</body>
</html>
