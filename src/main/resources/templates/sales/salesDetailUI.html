<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>직영점 판매상품 목록</title>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- =========================
       CUSTOM CSS
  ========================== -->
  <style>
    .page-wrapper {
      max-width:1500px;
      margin:auto;
    }
    .w-240 { width:240px; }
    .w-80 { width:80px; }
  </style>
</head>

<body class="bg-light">

<div class="page-wrapper">

  <!-- 매장명 -->
  <h4 class="text-center mb-4 mt-3">금천직영점</h4>

  <!-- 뒤로가기 + 검색창 -->
  <div class="d-flex justify-content-between align-items-center mb-3">

    <!-- 왼쪽 : 뒤로가기 -->
    <button id="btnBack" class="btn btn-warning btn-sm">뒤로가기</button>

    <!-- 오른쪽 : 검색 -->
    <div class="d-flex gap-2">
      <input type="text" class="form-control w-240" placeholder="판매상품">
      <button id="orderDeatilBtn" class="btn btn-primary">검색</button>
    </div>

  </div>

  <!-- 테이블 -->
  <div class="card">
    <div class="card-body p-0">

      <table class="table table-hover mb-0 text-center align-middle" id="dataTable">
        <thead class="table-light">
        <tr>
          <th>번호</th>
          <th>카테고리</th>
          <th>판매상품</th>
          <th>사이즈</th>
          <th>판매수량</th>
          <th>매출액</th>
        </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>

    </div>
  </div>

  <!-- 페이지네이션 + 개수선택 -->
  <div class="d-flex justify-content-between align-items-center mt-3">

    <!-- 왼쪽 의도적 빈칸 -->
    <div class="w-80"></div>

    <div class="flex-grow-1 d-flex justify-content-center">
      <nav>
        <ul class="pagination mb-0" id="pagination"></ul>
      </nav>
    </div>

    <div class="d-flex justify-content-end">
      <select id="rowsPerPage" class="form-select form-select-sm w-80">
        <option value="5">5</option>
        <option value="10" selected>10</option>
        <option value="20">20</option>
      </select>
    </div>

  </div>

</div>

<!-- ============================
     SCRIPT
============================ -->
<script>
  /* 뒤로가기 */
  $("#btnBack").on("click", function () {
    history.back();
  });

  /* 샘플 데이터 */
  const data = [
    {no:1, category:"피자", item:"페퍼로니피자", size:"라지", qty:80, price:"800,500"},
    {no:2, category:"피자", item:"치즈피자", size:"라지", qty:70, price:"678,400"},
    {no:3, category:"피자", item:"콤비네이션피자", size:"라지", qty:60, price:"719,400"},
    {no:4, category:"음료", item:"콜라", size:"1.5L", qty:70, price:"126,000"},
    {no:5, category:"음료", item:"사이다", size:"1.5L", qty:65, price:"120,000"},
    {no:6, category:"피자", item:"불고기피자", size:"라지", qty:55, price:"650,000"},
    {no:7, category:"피자", item:"베이컨피자", size:"라지", qty:45, price:"610,000"},
    {no:8, category:"피자", item:"고구마피자", size:"라지", qty:48, price:"630,000"},
    {no:9, category:"음료", item:"환타", size:"1.5L", qty:30, price:"90,000"},
    {no:10, category:"음료", item:"제로콜라", size:"1.5L", qty:40, price:"110,000"}
  ];

  let currentPage = 1;

  /* 테이블 렌더링 */
  function renderTable() {
    const rowsPerPage = Number($("#rowsPerPage").val());
    const startIdx = (currentPage - 1) * rowsPerPage;
    const endIdx = startIdx + rowsPerPage;

    const $tbody = $("#tableBody");
    $tbody.empty();

    data.slice(startIdx, endIdx).forEach(row => {
      $tbody.append(`
        <tr>
          <td>${row.no}</td>
          <td>${row.category}</td>
          <td>${row.item}</td>
          <td>${row.size}</td>
          <td>${row.qty}</td>
          <td>${row.price}</td>
        </tr>
      `);
    });

    renderPagination(rowsPerPage);
  }

  /* 페이지네이션 렌더링 */
  function renderPagination(rowsPerPage) {
    const totalPages = Math.ceil(data.length / rowsPerPage);
    const $pagination = $("#pagination");

    $pagination.empty();

    // 이전
    $pagination.append(`
      <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
        <a class="page-link" href="#" onclick="movePage(${currentPage - 1})">&lt;</a>
      </li>
    `);

    // 숫자
    for (let i = 1; i <= totalPages; i++) {
      $pagination.append(`
        <li class="page-item ${i === currentPage ? 'active' : ''}">
          <a class="page-link" href="#" onclick="movePage(${i})">${i}</a>
        </li>
      `);
    }

    // 다음
    $pagination.append(`
      <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
        <a class="page-link" href="#" onclick="movePage(${currentPage + 1})">&gt;</a>
      </li>
    `);
  }

  /* 페이지 이동 */
  function movePage(page) {
    const rowsPerPage = Number($("#rowsPerPage").val());
    const totalPages = Math.ceil(data.length / rowsPerPage);

    if (page < 1 || page > totalPages) return;

    currentPage = page;
    renderTable();
  }

  /* 개수 변경 이벤트 */
  $("#rowsPerPage").on("change", function() {
    currentPage = 1;
    renderTable();
  });

  /* 초기 실행 */
  $(document).ready(function() {
    renderTable();
  });

</script>

</body>
</html>
