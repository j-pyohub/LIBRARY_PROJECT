<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>직영점 목록 조회</title>

  <!-- Bootstrap + jQuery -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body { background-color:#e5e5e5; }
    .section-box { background:#fff; border:1px solid #ddd; border-radius:10px; padding:20px; }

    .pill-box {
      border:1px solid #000; border-radius:12px; padding:6px 12px;
      background:#fff; min-width:150px; text-align:center;
    }
    .detail-btn { width:22px; cursor:pointer; }
    .modal-label { font-weight:600; margin-bottom:4px; }

    /* 버튼 색 FFEEAA */
    .btn-custom-yellow {
      background-color: #FFEEAA !important;
      border-color: #FFEEAA !important;
      color: #000 !important;
      font-weight: 600;
    }
    .btn-custom-yellow:hover {
      background-color: #F3E292 !important;
    }

    /* 페이지네이션 가운데 정렬 */
    #paginationArea ul { justify-content:center; }
  </style>
</head>

<body class="p-3">

<div class="border border-secondary" style="max-width:1500px; margin:0 auto; background:#fff;">

  <!-- 제목 -->
  <div class="p-3 fs-3 fw-bold">직영점 목록 조회</div>

  <!-- 검색 UI는 그대로 유지 -->
  <div class="px-3 mb-3">
    <div class="d-flex justify-content-end gap-2">

      <select id="searchType" class="form-select form-select-sm" style="width:120px;">
        <option value="all">전체</option>
        <option value="region">지역</option>
        <option value="name">직영점명</option>
        <option value="manager">점장명</option>
        <option value="status">상태</option>
      </select>

      <input type="text" id="searchKeyword" class="form-control form-control-sm"
             placeholder="검색어 입력" style="width:180px;">

      <button id="searchBtn" class="btn btn-custom-yellow btn-sm">검색</button>

    </div>
  </div>

  <!-- 본문 -->
  <div class="px-3 pb-4">
    <div class="section-box">
      <div class="row">

        <!-- 좌측 목록 -->
        <div class="col-7">
          <table class="table table-hover align-middle">
            <thead>
            <tr class="text-center">
              <th>번호</th>
              <th>직영점명</th>
              <th>지역</th>
              <th>점장명</th>
              <th>상태</th>
              <th></th>
            </tr>
            </thead>
            <tbody id="storeTable"></tbody>
          </table>

          <div id="paginationArea" class="d-flex justify-content-center mt-2"></div>
        </div>

        <!-- 우측 지도 -->
        <div class="col-5">
          <div style="width:100%; height:500px;">
            <img src="/image/map_sample.png"
                 style="width:100%;height:100%;object-fit:cover;border-radius:8px;">
          </div>
        </div>

      </div>
    </div>
  </div>

</div>

<!-- 상세 모달 -->
<div class="modal fade" id="storeDetailModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="fw-bold">직영점 상세 보기</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <div class="d-flex gap-2 justify-content-end mb-3" id="managerButtons">
          <button id="stockSearchBtn"  class="btn btn-custom-yellow btn-sm">재고 조회</button>
          <button id="menuSearchBtn"   class="btn btn-custom-yellow btn-sm">판매 메뉴 조회</button>
          <button id="salesSearchBtn"  class="btn btn-custom-yellow btn-sm">매출 조회</button>
        </div>

        <div class="d-flex justify-content-between gap-4">

          <!-- 좌측 -->
          <div style="flex: 1; min-width: 470px;">

            <div class="row mb-2">
              <div class="col-4 modal-label">직영점</div>
              <div class="col-4 modal-label">상태</div>
            </div>

            <div class="row mb-3">
              <div class="col-4"><div id="mdStoreName" class="pill-box"></div></div>
              <div class="col-4"><div id="mdStatus" class="pill-box"></div></div>
            </div>

            <div class="row mb-2">
              <div class="col-4 modal-label">점장명</div>
              <div class="col-4 modal-label">점장 연락처</div>
            </div>

            <div class="row mb-3">
              <div class="col-4"><div id="mdManagerName" class="pill-box"></div></div>
              <div class="col-4"><div id="mdManagerPhone" class="pill-box"></div></div>
            </div>

            <div class="modal-label mb-1">주소</div>
            <div class="mb-3">
              <div id="mdAddress" class="pill-box" style="width: 97%;"></div>
            </div>

            <div class="row mb-2">
              <div class="col-4 modal-label">직영점 전화</div>
              <div class="col-4 modal-label">개점일</div>
            </div>

            <div class="row mb-3">
              <div class="col-4"><div id="mdStorePhone" class="pill-box"></div></div>
              <div class="col-4"><div id="mdOpenDate" class="pill-box"></div></div>
            </div>

            <div class="row mb-2">
              <div class="col-4 modal-label">영업시간</div>
              <div class="col-4 modal-label">폐점일</div>
            </div>

            <div class="row">
              <div class="col-4"><div id="mdBizTime" class="pill-box"></div></div>
              <div class="col-4"><div id="mdCloseDate" class="pill-box"></div></div>
            </div>

          </div>

          <!-- 우측 이미지 -->
          <div style="width: 430px; max-width: 100%;">
            <div class="image-wrapper" style="width:100%; height:350px; overflow:hidden; border-radius:10px;">
              <img id="mdStoreImg" src="https://picsum.photos/450/350"
                   style="width:100%; height:100%; object-fit:cover;">
            </div>
          </div>

        </div>

      </div>

      <div class="modal-footer justify-content-center">
        <button id="closeDetailBtn" type="button" class="btn btn-custom-yellow px-4" data-bs-dismiss="modal">
          닫기
        </button>
      </div>

    </div>
  </div>
</div>

<script>
  var stores = [
    {no:1, name:"용문점", region:"대전광역시 서구 도산로 335", manager:"최정문", status:"영업중",
      managerPhone:"010-0000-0001", storePhone:"042-111-1111", openDate:"2023.01.01",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:2, name:"유천점", region:"대전광역시 중구 계백로1606", manager:"홍길동", status:"영업중",
      managerPhone:"010-0000-0002", storePhone:"042-222-2222", openDate:"2023.02.01",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:3, name:"송촌점", region:"대전광역시 대덕구 계족산로 25", manager:"김재욱", status:"영업중",
      managerPhone:"010-0000-0003", storePhone:"042-333-3333", openDate:"2023.03.01",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:4, name:"신탄진점", region:"대전광역시 대덕구 신탄진로 800-1", manager:"홍길동", status:"영업중",
      managerPhone:"010-0000-0004", storePhone:"042-444-4444", openDate:"2023.03.15",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:5, name:"가오점", region:"대전광역시 동구 은어송로 75", manager:"이순신", status:"영업중",
      managerPhone:"010-0000-0005", storePhone:"042-555-5555", openDate:"2023.04.01",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:6, name:"대전대동점", region:"대전광역시 동구 계족로 194-37", manager:"배성윤", status:"영업중",
      managerPhone:"010-0000-0006", storePhone:"042-666-6666", openDate:"2023.04.10",
      bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:7, name:"대전도안점", region:"대전광역시 서구 도안동로 31번길 11-15", manager:"이재웅",
      status:"폐업", managerPhone:"010-0000-0007", storePhone:"042-777-7777",
      openDate:"2023.05.01", bizTime:"11:00 - 22:00", closeDate:"2024.01.31"},
    {no:8, name:"대전월평점", region:"대전광역시 서구 월평로 69", manager:"정윤찬",
      status:"영업중", managerPhone:"010-0000-0008", storePhone:"042-888-8888",
      openDate:"2023.06.01", bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:9, name:"둔산점", region:"대전광역시 서구 문정로 170", manager:"표수정", status:"영업중",
      managerPhone:"010-5169-1244", storePhone:"042-1577-1577",
      openDate:"2025.11.11", bizTime:"11:00 - 22:00", closeDate:"-"},
    {no:10, name:"대덕점", region:"대전광역시 유성구 와룡로 3", manager:"함은숙", status:"영업중",
      managerPhone:"010-0000-0010", storePhone:"042-999-9999",
      openDate:"2023.07.01", bizTime:"11:00 - 22:00", closeDate:"-"}
  ];

  var currentPage = 1;
  var rowsPerPage = 10;

  function renderTable(list){
    var $tbody = $("#storeTable");
    $tbody.empty();

    var start = (currentPage - 1) * rowsPerPage;
    var end = start + rowsPerPage;
    var pageData = list.slice(start, end);

    pageData.forEach(function(s){
      var $tr = $("<tr>").addClass("text-center");
      $tr.append(`<td>${s.no}</td>`);
      $tr.append(`<td>${s.name}</td>`);
      $tr.append(`<td class="text-start">${s.region}</td>`);
      $tr.append(`<td>${s.manager}</td>`);
      $tr.append(`<td>${s.status}</td>`);
      $tr.append(`<td><img src="/image/detail.png" class="detail-btn open-detail" data-no="${s.no}"></td>`);
      $tbody.append($tr);
    });

    createPagination(list);
  }

  function createPagination(list){
    var totalPages = Math.ceil(list.length / rowsPerPage);
    var html = `<ul class="pagination pagination-sm">`;

    html += `
      <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
        <a class="page-link" href="#" onclick="movePage(${currentPage - 1})">&lt;</a>
      </li>`;

    for(let i=1; i<=totalPages; i++){
      html += `
        <li class="page-item ${currentPage === i ? 'active' : ''}">
          <a class="page-link" href="#" onclick="movePage(${i})">${i}</a>
        </li>`;
    }

    html += `
      <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
        <a class="page-link" href="#" onclick="movePage(${currentPage + 1})">&gt;</a>
      </li>`;

    html += `</ul>`;
    $("#paginationArea").html(html);
  }

  function movePage(num){
    var totalPages = Math.ceil(stores.length / rowsPerPage);
    if(num < 1 || num > totalPages) return;
    currentPage = num;
    renderTable(stores);
  }

  function openStoreDetail(no){
    var s = stores.find(x => x.no === no);
    if(!s) return;

    $("#mdStoreName").text(s.name);
    $("#mdStatus").text(s.status);
    $("#mdManagerName").text(s.manager);
    $("#mdManagerPhone").text(s.managerPhone);
    $("#mdAddress").text(s.region);
    $("#mdStorePhone").text(s.storePhone);
    $("#mdOpenDate").text(s.openDate);
    $("#mdBizTime").text(s.bizTime);
    $("#mdCloseDate").text(s.closeDate);

    new bootstrap.Modal(document.getElementById("storeDetailModal")).show();
  }

  $(document).ready(function(){
    renderTable(stores);

    /* 검색 버튼 클릭해도 아무 기능 없음 */
    $("#searchBtn").on("click", function(){
      alert("검색 기능은 아직 구현되지 않았습니다.");
    });

    $("#storeTable").on("click", ".open-detail", function(){
      openStoreDetail($(this).data("no"));
    });
  });
</script>

</body>
</html>
